!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular")):"function"==typeof define&&define.amd?define(["angular"],e):"object"==typeof exports?exports.AngularDragDrop=e(require("angular")):t.AngularDragDrop=e(t.angular)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n=r(5);r(4),t.exports="filearts.dragDrop";var a=n.module(t.exports,[]);a.factory("dragContext",["$rootElement",function(t){function e(){return n.extend(a,{data:null,reset:e,start:r})}function r(t){return a.data=t,t}var a={};return e()}]),a.run(["$rootElement","$timeout",function(t,e){function r(t){a()}function n(t){a()}function a(){e(function(){t.removeClass("drag-active")})}t[0].addEventListener("dragend",r,!0),t[0].addEventListener("drop",n,!0)}]),a.directive("dragContainer",["$rootElement","$parse","$timeout","dragContext",function(t,e,r,n){return{restrict:"A",link:function(a,o,i){function s(e){if(r(function(){t.addClass("drag-active")},0,!1),e.dataTransfer.setData("text","anything"),n.start(i.dragData?a.$eval(i.dragData):o),o.addClass("drag-container-active"),l){var s={$event:e,$dragData:n.data};a.$apply(function(){l(a,s)})}}function d(e){if(r(function(){t.removeClass("drag-active")},0,!1),n.reset(),o.removeClass("drag-container-active"),c){var i={$event:e,$dragData:n.data};a.$apply(function(){c(a,i)})}n.lastTarget&&n.lastTarget.$attrs.$removeClass("drag-over")}var l=i.onDragStart?e(i.onDragStart):null,c=i.onDragEnd?e(i.onDragEnd):null;i.$addClass("drag-container"),a.$watch(i.dragContainer,function(t){i.$set("draggable","undefined"==typeof t||t)}),o.on("dragstart",s),o.on("dragend",d)}}}]),a.directive("dropContainer",["$document","$parse","$window","dragContext",function(t,e,r,a){function o(t){return t[0]||t}function i(e){e=o(e);var a=e.getBoundingClientRect();return{width:Math.round(n.isNumber(a.width)?a.width:e.offsetWidth),height:Math.round(n.isNumber(a.height)?a.height:e.offsetHeight),top:Math.round(a.top+(r.pageYOffset||t[0].documentElement.scrollTop)),left:Math.round(a.left+(r.pageXOffset||t[0].documentElement.scrollLeft))}}return{restrict:"A",require:"dropContainer",controller:"DropContainerController",controllerAs:"dropContainer",link:function(t,r,o,s){function d(e){a.lastTarget&&a.lastTarget!==r&&a.lastTarget.$attrs.$removeClass("drag-over"),a.lastTarget={$attrs:o,$element:r};var n={$event:e,$dragData:a.data};f(t,n)&&(e.preventDefault(),o.$addClass("drag-over"),p&&t.$apply(function(){p(t,n)}))}function l(e){var d={$event:e,$dragData:a.data};if(f(t,d)){e.preventDefault();var l=i(r);o.$addClass("drag-over");var c=Number.MAX_VALUE,u=l.width,p=l.height,v=e.pageX-l.left,h=e.pageY-l.top,$=s.lastTarget;n.forEach(s.targets,function(t,e){var r=u/2,n=p/2;e.indexOf("left")>=0&&(r=1*u/4),e.indexOf("top")>=0&&(n=1*p/4),e.indexOf("right")>=0&&(r=3*u/4),e.indexOf("bottom")>=0&&(n=3*p/4);var a=Math.pow(r-v,2)+Math.pow(n-h,2);a<c&&($=t,c=a)}),t.$apply(function(){g&&g(t,d),$&&($!==s.lastTarget&&(s.lastTarget&&o.$removeClass("drop-container-"+s.lastTarget.anchor),o.$addClass("drop-container-"+$.anchor),s.lastTarget&&s.lastTarget.handleDragLeave(e,d),$.handleDragEnter(e,d),s.lastTarget=$),$.handleDragOver(e))})}}function c(e){o.$removeClass("drag-over");var r={$event:e,$dragData:a.data};t.$apply(function(){v&&v(t,r),s.lastTarget&&s.lastTarget.handleDragLeave(e,r),s.lastTarget&&(o.$removeClass("drop-container-"+s.lastTarget.anchor),s.lastTarget=null)})}function u(e){a.lastTarget&&a.lastTarget.$attrs.$removeClass("drag-over");var r={$event:e,$dragData:a.data};f(t,r)&&(e.preventDefault(),a.reset(),t.$apply(function(){h&&h(t,r),s.lastTarget&&s.lastTarget.handleDrop(e,r)})),s.lastTarget&&o.$removeClass("drop-container-"+s.lastTarget.anchor),s.lastTarget=null}var f=o.dropAccepts?e(o.dropAccepts):function(t,e){return"undefined"!=typeof e.$dragData},p=o.onDragEnter?e(o.onDragEnter):null,g=o.onDragOver?e(o.onDragOver):null,v=o.onDragLeave?e(o.onDragLeave):null,h=o.onDrop?e(o.onDrop):null;o.$addClass("drop-container"),r.on("dragover",l),r.on("dragenter",d),r.on("dragleave",c),r.on("drop",u)}}}]),a.controller("DropContainerController",[function(){var t=this,e="center top top-right right bottom-right bottom bottom-left left top-left".split(" ");t.targets={},t.lastTarget=null,t.attach=function(r){var n=r.anchor;if(e.indexOf(n)<0)throw new Error("Invalid drop target anchor `"+n+"`.");return t.targets[n]=r,r},t.detach=function(r){var n=r.anchor;if(e.indexOf(n)<0)throw new Error("Invalid drop target anchor `"+n+"`.");if(!t.targets[n]===r)throw new Error("The indicated drop target is not attached at the anchor `"+n+"`.");return delete t.targets[n],r}}]),a.directive("dropTarget",["$parse","dragContext",function(t,e){return{restrict:"A",require:["^dropContainer","dropTarget"],scope:!0,bindToController:{anchor:"@dropTarget"},controller:n.noop,controllerAs:"dropTarget",link:function(e,r,a,o){var i=o[0],s=o[1];a.$addClass("drop-target"),s.$attrs=a,s.$scope=e,a.$addClass("drop-target drop-target-"+s.anchor),i.attach(s);var d=s.$attrs.onDragEnter?t(s.$attrs.onDragEnter):n.noop,l=s.$attrs.onDragLeave?t(s.$attrs.onDragLeave):n.noop,c=s.$attrs.onDragOver?t(s.$attrs.onDragOver):n.noop,u=s.$attrs.onDrop?t(s.$attrs.onDrop):n.noop;s.handleDragEnter=function(t,e){d(s.$scope,e)},s.handleDragLeave=function(t,e){l(s.$scope,e)},s.handleDragOver=function(t,e){c(s.$scope,e)},s.handleDrop=function(t,e){u(s.$scope,e)},e.$on("$destroy",function(){i.detach(s)})}}}])},function(t,e,r){e=t.exports=r(2)(),e.push([t.id,'.drag-active .drop-container{position:relative}.drag-active .drop-container *{pointer-events:none}.drag-active .drop-container:before{position:absolute;top:0;right:0;bottom:0;left:0;z-index:9999;content:""}',""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e];r[2]?t.push("@media "+r[2]+"{"+r[1]+"}"):t.push(r[1])}return t.join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(n[o]=!0)}for(a=0;a<e.length;a++){var i=e[a];"number"==typeof i[0]&&n[i[0]]||(r&&!i[2]?i[2]=r:r&&(i[2]="("+i[2]+") and ("+r+")"),t.push(i))}},t}},function(t,e,r){function n(t,e){for(var r=0;r<t.length;r++){var n=t[r],a=p[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(l(n.parts[o],e))}else{for(var i=[],o=0;o<n.parts.length;o++)i.push(l(n.parts[o],e));p[n.id]={id:n.id,refs:1,parts:i}}}}function a(t){for(var e=[],r={},n=0;n<t.length;n++){var a=t[n],o=a[0],i=a[1],s=a[2],d=a[3],l={css:i,media:s,sourceMap:d};r[o]?r[o].parts.push(l):e.push(r[o]={id:o,parts:[l]})}return e}function o(t,e){var r=h(),n=D[D.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),D.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(e)}}function i(t){t.parentNode.removeChild(t);var e=D.indexOf(t);e>=0&&D.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function d(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function l(t,e){var r,n,a;if(e.singleton){var o=m++;r=$||($=s(e)),n=c.bind(null,r,o,!1),a=c.bind(null,r,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=d(e),n=f.bind(null,r),a=function(){i(r),r.href&&URL.revokeObjectURL(r.href)}):(r=s(e),n=u.bind(null,r),a=function(){i(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}function c(t,e,r,n){var a=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=C(e,a);else{var o=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function u(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function f(t,e){var r=e.css,n=e.sourceMap;n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var a=new Blob([r],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}var p={},g=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},v=g(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=g(function(){return document.head||document.getElementsByTagName("head")[0]}),$=null,m=0,D=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=v()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var r=a(t);return n(r,e),function(t){for(var o=[],i=0;i<r.length;i++){var s=r[i],d=p[s.id];d.refs--,o.push(d)}if(t){var l=a(t);n(l,e)}for(var i=0;i<o.length;i++){var d=o[i];if(0===d.refs){for(var c=0;c<d.parts.length;c++)d.parts[c]();delete p[d.id]}}}};var C=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}()},function(t,e,r){var n=r(1);"string"==typeof n&&(n=[[t.id,n,""]]);r(3)(n,{});n.locals&&(t.exports=n.locals)},function(e,r){e.exports=t}])});